
// Generated by Tramway SDK Code generator

#include <framework/entity.h>
#include <framework/serialization.h>

#include <framework/event.h>

#include <components/render.h>
#include <components/animation.h>

#include <templates/macros.h>

using namespace tram;

enum GameState {
	STATE_NORMAL,
	STATE_ITEM
};

class ProgressController : public Entity {
public:
	ProgressController();

	static void Init();
	
	TRAM_SDK_ENTITY_NAME("progress-controller")
	
	void UpdateParameters();
	void SetParameters();
	void Load();
	void Unload();
	void Serialize();
	void EventHandler(Event& evt);
	void MessageHandler(Message& msg);
	name_t GetType();
	
	GameState GetState() {
		return state;
	}
	
	void SetNPCDialog(std::string dialog); 
	void SetNPCCallback(name_t callback); 
	void SetNotification(std::string notif); 
	void SetItemDisplay(std::string text, name_t model);
	
private:
	GameState state = STATE_NORMAL;
	
	std::string npc_text = "";
	int npc_progress = 0;
	int npc_length = 0;
	name_t npc_callback;
	
	std::string notif_text = "";
	int notif_progress = 0;
	int notif_length = 0;
	
	Component<RenderComponent> item_model;
	Component<AnimationComponent> item_animation;
	
	EventListener frame;
	EventListener keypress;
};
	